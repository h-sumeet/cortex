generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("MONGODB_URL")
}

model Provider {
  id              String    @id @default(auto()) @map("_id") @db.ObjectId
  provider        String
  provider_slug   String    @unique
  topic_count     Int       @default(0)
  created_at      DateTime  @default(now())
  updated_at      DateTime  @updatedAt
  
  topics          Topic[]

  @@map("providers")
}


model Topic {
  id              String    @id @default(auto()) @map("_id") @db.ObjectId
  topic           String
  topic_slug      String    @unique
  provider_id     String    @db.ObjectId 
  qn_count        Int       @default(0)
  created_at      DateTime  @default(now())
  updated_at      DateTime  @updatedAt
  
  provider        Provider  @relation(fields: [provider_id], references: [id])
  questions       Question[]

  @@map("topics")
}

model Question {
  id              String    @id @default(auto()) @map("_id") @db.ObjectId
  seq_no          Float
  topic_id        String    @db.ObjectId 
  qn_slug         String    @unique  
  question        String
  answer          Int
  options         Options[]
  explanation     String?
  image_url       String?
  difficulty      String
  tags            String[]
  created_at      DateTime  @default(now())
  updated_at      DateTime  @updatedAt
  
  topic           Topic     @relation(fields: [topic_id], references: [id])

  @@map("questions")
}

type Options {
  option_no      Int
  option_text    String
  image_url      String?
}